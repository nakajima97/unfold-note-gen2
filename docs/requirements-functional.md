# 要件定義書 - 機能要件

## 機能要件

### 1.1 ユーザー管理
- **ユーザー登録**: 管理者によって承認されたメールアドレスのみが登録可能
  - allowed_emailsテーブルに承認済みメールアドレスを登録
  - メールアドレスの登録はSupabaseのダッシュボードから直接DBを変更して行う
- **ユーザー認証**: Google OAuthを使用したログイン
  - 例外として環境変数によってID/パスワードでのログインも可能
  - ローカルでの開発をスムーズにすすめるための対処
- **ユーザープロファイル**: 表示名などの基本情報の管理

### 1.2 プロジェクト管理
- **プロジェクト作成**: ユーザーは複数のプロジェクトを作成可能
  - 初回ログイン時にユーザ名のプロジェクトが自動で作成される
- **プロジェクト編集**: プロジェクト名の変更
- **プロジェクトアーカイブ**: 使用しないプロジェクトのアーカイブ
- **プロジェクト削除**: 不要なプロジェクトの削除
- **デフォルトプロジェクト**: ログイン後に表示されるプロジェクト

### 1.3 ノート管理
- **ノート作成**: マークダウン形式でのノート作成
- **ノート編集**: 既存ノートの編集
- **ノート削除**: 不要なノートの削除
- **ノート一覧表示**: プロジェクト内のノート一覧の表示
- **ノート検索**: タイトルや内容による検索
- **メディアの追加**: ノート内に画像やファイルを追加
  - 画像ファイルのアップロードと表示
  - 画像のリサイズと最適化
  - ファイルのアクセス制御（プロジェクト所有者のみアクセス可能）
  - ドラッグ＆ドロップによるアップロード
  - ファイルサイズ上限：10MB

### 1.4 タグ機能
- **タグ付け**: ノート内に `#タグ名` を記述することでタグ付け
- **タグ抽出**: ノートの作成・更新時に自動的にタグを抽出し、データベースに保存
- **タグ検索**: 特定のタグが付けられたノートの検索
- **タグ提案**: 既存のタグに基づく入力候補の表示
- **タグ関連表示**: ノートに関連するタグの一覧表示
- **タグ参照検出**: 存在しないタグへの参照の検出と表示
- **タグと同名のノートの検出**: タグと完全一致するノートの検出と表示
  - タグの意味を記述できるようにするのが目的
  - タグ名をクリックすることで該当ノートに遷移する
  - 完全一致するノートが存在するかはフォントカラーで示す
    - 存在しない場合はピンク
    - 存在する場合は青

### 1.5 UI/UX要件
- **レスポンシブデザイン**: 様々なデバイスでの使用に対応
- **ダークモード**: 明暗切り替え機能
- **キーボードショートカット**: 効率的な操作のためのショートカット

### 1.6 エディタ機能
- **Tiptap**: リッチテキストエディタライブラリを使用
  - マークダウンライクなショートカットをサポート（例: `#` で見出し、`-` で箇条書き）
  - WYSIWYG（What You See Is What You Get）形式でコンテンツを編集
  - 利用者にとってはマークダウンエディタに近い使い勝手を提供

### 1.7 データ管理
- **自動保存**: 編集内容の自動保存
- **エクスポート**: マークダウン、PDF、HTMLなどの形式でのエクスポート
- **インポート**: 外部ファイルからのインポート
